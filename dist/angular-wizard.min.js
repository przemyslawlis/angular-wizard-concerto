/**
 * Easy to use Wizard library for AngularJS
 * @version v0.4.0 - 2014-07-10 * @link https://github.com/mgonto/angular-wizard
 * @author Martin Gontovnikas <martin@gon.to>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function wizardButtonDirective(e){angular.module("mgo-angular-wizard").directive(e,function(){return{restrict:"A",replace:false,require:"^wizard",link:function(t,n,r,i){n.on("click",function(n){n.preventDefault();t.$apply(function(){t.$eval(r[e]);i[e.replace("wz","").toLowerCase()]()})})}}})}angular.module("templates-angularwizard",["step.html","wizard.html"]);angular.module("step.html",[]).run(["$templateCache",function(e){e.put("step.html",'<section ng-show="selected" ng-class="{current: selected, done: completed}" class="step" ng-transclude>\n'+"</section>")}]);angular.module("wizard.html",[]).run(["$templateCache",function(e){e.put("wizard.html","<div>\n"+'    <div class="steps" ng-transclude></div>\n'+'    <ul class="steps-indicator steps-{{steps.length}}" ng-if="!hideIndicators">\n'+'      <li ng-class="{default: !step.completed && !step.selected, current: step.selected && !step.completed, done: step.completed && !step.selected, editing: step.selected && step.completed}" ng-repeat="step in steps">\n'+'        <a ng-click="goTo(step)">{{step.title || step.wzTitle}}</a>\n'+"      </li>\n"+"    </ul>\n"+"</div>\n"+"")}]);angular.module("mgo-angular-wizard",["templates-angularwizard"]);angular.module("mgo-angular-wizard").directive("wzStep",function(){return{restrict:"EA",replace:true,transclude:true,scope:{wzTitle:"@",title:"@",stepUid:"@"},require:"^wizard",templateUrl:function(e,t){return t.template||"step.html"},link:function(e,t,n,r){e.title=e.title||e.wzTitle;r.addStep(e)}}});angular.module("mgo-angular-wizard").directive("wizard",function(){return{restrict:"EA",replace:true,transclude:true,scope:{currentStep:"=",onFinish:"&",hideIndicators:"=",editMode:"=",name:"@",stepsCollection:"="},templateUrl:function(e,t){return t.template||"wizard.html"},controller:["$scope","$element","WizardHandler",function(e,t,n){function r(){_.each(e.steps,function(e){e.selected=false});e.selectedStep=null}n.addWizard(e.name||n.defaultName,this);e.$on("$destroy",function(){n.removeWizard(e.name||n.defaultName)});e.steps=[];e.$watchCollection("stepsCollection",function(){e.steps=[]});e.$watch("currentStep",function(t){if(!t)return;var n=e.selectedStep.title||e.selectedStep.wzTitle;if(e.selectedStep&&n!==e.currentStep){e.goTo(_.findWhere(e.steps,{title:e.currentStep}))}});e.$watch("[editMode, steps.length]",function(){var t=e.editMode;if(_.isUndefined(t)||_.isNull(t))return;if(t){_.each(e.steps,function(e){e.completed=true})}},true);this.addStep=function(t){var n=this.stepIndex(t.stepUid);if(n===-1){e.steps.push(t);if(e.steps.length===1){e.goTo(e.steps[0])}}else{e.steps[n].title=t.title}};e.goTo=function(t){r();e.selectedStep=t;if(!_.isUndefined(e.currentStep)){e.currentStep=t.title||t.wzTitle}t.selected=true;e.$emit("wizard:stepChanged",{step:t,index:_.indexOf(e.steps,t)})};e.currentStepNumber=function(){return _.indexOf(e.steps,e.selectedStep)+1};this.stepIndex=function(t){for(var n=0;n<e.steps.length;n++){if(e.steps[n].stepUid===t)return n}return-1};this.next=function(t){var n=_.indexOf(e.steps,e.selectedStep);if(!t){e.selectedStep.completed=true}if(n===e.steps.length-1){this.finish()}else{e.goTo(e.steps[n+1])}};this.goTo=function(t){var n;if(_.isNumber(t)){n=e.steps[t]}else{n=_.findWhere(e.steps,{title:t})}e.goTo(n)};this.finish=function(){if(e.onFinish){e.onFinish()}};this.cancel=this.previous=function(){var t=_.indexOf(e.steps,e.selectedStep);if(t===0){throw new Error("Can't go back. It's already in step 0")}else{e.goTo(e.steps[t-1])}}}]}});wizardButtonDirective("wzNext");wizardButtonDirective("wzPrevious");wizardButtonDirective("wzFinish");wizardButtonDirective("wzCancel");angular.module("mgo-angular-wizard").factory("WizardHandler",function(){var e={};var t={};e.defaultName="defaultWizard";e.addWizard=function(e,n){t[e]=n};e.removeWizard=function(e){delete t[e]};e.wizard=function(n){var r=n;if(!n){r=e.defaultName}return t[r]};return e})